<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evochora Visualizer</title>
    <link rel="icon" type="image/x-icon" href="/favicons/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/favicons/android-chrome-512x512.png">
    <link rel="manifest" href="/favicons/site.webmanifest">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Doto:wght@900&family=Roboto:wght@400;700&family=Roboto+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="../shared/app-switcher/app-switcher.css">
    <script src="https://cdn.jsdelivr.net/npm/pixi.js@8.15.0/dist/pixi.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/protobufjs@8.0.0/dist/protobuf.min.js"></script>
</head>
<body>
<div id="error-banner" class="error-bar" style="display: none;">
    <span id="error-message" class="error-bar-message"></span>
    <button id="close-error-banner" class="error-bar-close">Close</button>
</div>

<!-- Tooltip für Zell-Informationen -->
<div id="cell-tooltip" class="cell-tooltip"></div>

<!-- Logo Panel (top-left) -->
<div id="logo-panel" class="top-panel">
    <div id="app-switcher-container"></div>
    <div class="logo-container">
        <span class="logo-text">EVOCHORA</span>
    </div>
</div>

<!-- Timeline Panel (bottom-center) -->
<div id="timeline-panel" class="footer-panel">
    <div class="timeline-tick-input tick-input-wrapper">
        <input type="number" id="tick-input" class="tick-input" min="0" value="0" aria-label="Tick">
        <span class="tick-total-suffix" id="tick-total-suffix">/N/A</span>
    </div>
    <div class="timeline-step-input tick-input-wrapper multiplier-wrapper" id="multiplier-wrapper" style="display: none;">
        <input type="number" id="large-step-multiplier" class="tick-input" value="100" min="1">
        <span id="multiplier-suffix" class="tick-total-suffix">x1</span>
    </div>
    <div class="timeline-nav-buttons">
        <button class="timeline-nav-btn" id="btn-prev-large" title="Back ×100 (PgDn)">◀◀</button>
        <button class="timeline-nav-btn" id="btn-prev-small" title="Previous sample (↓)">◀</button>
        <button class="timeline-nav-btn" id="btn-next-small" title="Next sample (↑)">▶</button>
        <button class="timeline-nav-btn" id="btn-next-large" title="Forward ×100 (PgUp)">▶▶</button>
    </div>
    <div class="timeline-track-container" id="timeline-track-container">
        <canvas id="timeline-track" height="24"></canvas>
        <div class="timeline-tooltip" id="timeline-tooltip"></div>
    </div>
</div>

<!-- Organism Panel (top-right) -->
<div id="organism-panel" class="top-panel">
    <div class="organism-panel-header" id="organism-panel-header">
        <div class="organism-panel-title">
            <span>Organisms</span>
            <span class="organism-count" id="organism-count">(0/0)</span>
        </div>
        <div class="organism-filter-wrapper" id="organism-filter-wrapper">
            <input type="text" id="organism-filter" class="organism-filter-input" placeholder="Filter...">
            <button class="organism-filter-clear hidden" id="organism-filter-clear" title="Clear filter">✕</button>
        </div>
        <div class="organism-panel-controls">
            <button class="color-mode-toggle" id="color-mode-toggle" title="Color by: Organism ID">ID</button>
            <button class="panel-toggle" id="organism-list-collapse" title="Collapse/Expand list">▲</button>
        </div>
    </div>
    <div class="organism-list-container" id="organism-list-container" style="display: none;">
        <div class="organism-list" id="organism-list"></div>
    </div>
    <div class="organism-selected-display" id="organism-selected-display"></div>
    <div class="organism-details-container" id="organism-details">
        <div data-section="info"></div>
        <div data-section="state"></div>
        <div data-section="instructions"></div>
        <div data-section="source"></div>
    </div>
</div>

<main class="container">
    <div class="world-container">
        <canvas id="worldCanvas"></canvas>
    </div>
    <div id="scrollbar-track-v" class="scrollbar-track-v">
        <div id="scrollbar-thumb-v" class="scrollbar-thumb-v"></div>
    </div>
    <div id="scrollbar-track-h" class="scrollbar-track-h">
        <div id="scrollbar-thumb-h" class="scrollbar-thumb-h"></div>
    </div>
</main>

<!-- Single entry point - all initialization in main.js -->
<script type="module" src="js/main.js"></script>
</body>
</html>
